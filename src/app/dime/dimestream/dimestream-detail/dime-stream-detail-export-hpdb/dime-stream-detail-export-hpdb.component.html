<div class="table-responsive">
	<table class="table table-condensed">
		<tr>
			<td colspan="2">
				<div class="table-responsive">
					<table class="table table-condensed" *ngIf="povDims.length > 0">
						<thead>
							<tr>
								<th width="30">POVs</th>
								<th>&nbsp;</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>&nbsp;</td>
								<td>
									<ng-container *ngFor="let dimension of povDims; let i = index;">
										<div class="btn-toolbar" role="toolbar" style="padding-bottom: 2px;">
											<div class="btn-group btn-group-xs">
												<button class="btn btn-default" type="button" title="Move to rows" (click)="addToRows(i, dimension.selectedMember, dimension.selectionType, 'povs')">
													<i class="fa fa-fw fa-bars"></i>
												</button>
												<button class="btn btn-default" type="button" title="Move to columns" (click)="addToCols(i, dimension.selectedMember, dimension.selectionType, 'povs')">
													<i class="fa fa-fw fa-columns"></i>
												</button>
											</div>
											<div class="btn-group btn-group-xs">
												<button class="btn btn-default" type="button" style="width:100px; max-width: 100px; text-align: left;">{{dimension.name}}</button>
											</div>
											<div class="btn-group btn-group-xs" *ngIf="dimension.status != 'Ready'">
												<button class="btn btn-default btn-xs" disabled>
													<i class="fa fa-circle-o-notch fa-spin fa-fw"></i>
													Please wait, refreshing member list
												</button>
											</div>
											<!-- <div class="btn-group btn-group-xs" *ngIf="dimension.status == 'Ready'">
												<button class="btn btn-default" type="button" (click)="openMemberSelector('pov', i)">
													<i class="fa fa-puzzle-piece fa-fw" title="Change Selection"></i> Change
												</button>
												<button class="btn btn-default" type="button" (click)="openMemberSelector('pov', i)">
													<ng-container *ngIf="dimension.selectedMember">{{dimension.selectedMember}}</ng-container>
													<ng-container *ngIf="!dimension.selectedMember">No member is selected</ng-container>
												</button>
											</div> -->
											<div class="btn-group btn-group-xs" *ngIf="dimension.status == 'Ready'">
												<div class="btn-group btn-group-xs" role="group">
													<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width: 180px; max-width: 180px; text-align: left;" disabled>
														<i class="fa fa-facebook fa-fw" aria-hidden="true"></i>
														{{displaySelectionType(dimension.selectionType)}}
														<span class="pull-right">
															<span class="caret"></span>
														</span>
													</button>
													<ul class="dropdown-menu">
														<li>
															<a (click)="dimension.selectionType = 'member'; recalculateCellCounts();">Member</a>
														</li>
														<li>
															<a (click)="dimension.selectionType = 'level0'; recalculateCellCounts();">Level 0 Descendants</a>
														</li>
														<li>
															<a (click)="dimension.selectionType = 'descendants'; recalculateCellCounts();">Descendants</a>
														</li>
														<li>
															<a (click)="dimension.selectionType = 'idescendants'; recalculateCellCounts();">IDescendants</a>
														</li>
														<li>
															<a (click)="dimension.selectionType = 'children'; recalculateCellCounts();">Children</a>
														</li>
														<li>
															<a (click)="dimension.selectionType = 'ichildren'; recalculateCellCounts();">IChildren</a>
														</li>
													</ul>
												</div>
												<button class="btn btn-default" type="button" (click)="openMemberSelector('pov', i)">
													<i class="fa fa-codepen fa-fw" aria-hidden="true"></i>
													<ng-container *ngIf="dimension.selectedMember">{{dimension.selectedMember}}
														<span class="caret"></span>
													</ng-container>
													<ng-container *ngIf="!dimension.selectedMember">No member is selected
														<span class="caret"></span>
													</ng-container>
												</button>
											</div>
										</div>
									</ng-container>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</td>
		</tr>
		<tr>
			<td width="50%">&nbsp;</td>
			<td width="50%">
				<div class="table-responsive">
					<table class="table table-condensed">
						<thead>
							<tr>
								<th width="110">Columns</th>
								<td>
									<div class="btn-group btn-group-xs">
										<button class="btn btn-default" type="button" title="Add column" (click)="addCol()">
											<i class="fa fa-plus fa-fw"></i>
										</button>
									</div>
								</td>
							</tr>
						</thead>
						<tbody>
							<ng-container *ngFor="let col of cols; let i = index;">
								<tr>
									<td>
										Column {{getColumnHeader(i)}}
										<button class="btn btn-xs pull-right" (click)="deleteCol(i)" *ngIf="cols.length > 1">
											<i class="fa fa-trash fa-fw"></i>
										</button>
									</td>
									<td>
										<ng-container *ngFor="let dimension of colDims; let dimindex = index;">
											<div class="btn-toolbar" role="toolbar" style="padding-bottom: 2px;">
												<div class="btn-group btn-group-xs">
													<button class="btn btn-default" type="button" title="Move to POVs" (click)="addToPOVs(dimindex, col[dimindex].selectedMember, col[dimindex].selectionType, 'cols')">
														<i class="fa fa-fw fa-filter"></i>
													</button>
													<button class="btn btn-default" type="button" title="Move to rows" (click)="addToRows(dimindex, col[dimindex].selectedMember, col[dimindex].selectionType, 'cols')">
														<i class="fa fa-fw fa-bars"></i>
													</button>
												</div>
												<div class="btn-group btn-group-xs">
													<button class="btn btn-default" type="button" style="width:100px; max-width: 100px; text-align: left;">{{dimension.name}}</button>
												</div>
												<div class="btn-group btn-group-xs" *ngIf="dimension.status != 'Ready'">
													<button class="btn btn-default btn-xs" disabled>
														<i class="fa fa-circle-o-notch fa-spin fa-fw"></i>
														Please wait, refreshing member list
													</button>
												</div>
												<div class="btn-group btn-group-xs" *ngIf="dimension.status == 'Ready'">
													<div class="btn-group btn-group-xs" role="group">
														<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width: 180px; max-width: 180px; text-align: left;">
															<i class="fa fa-facebook fa-fw" aria-hidden="true"></i>
															{{displaySelectionType(col[dimindex].selectionType)}}
															<span class="pull-right">
																<span class="caret"></span>
															</span>
														</button>
														<ul class="dropdown-menu">
															<li>
																<a (click)="col[dimindex].selectionType = 'member'; recalculateCellCounts();">Member</a>
															</li>
															<li>
																<a (click)="col[dimindex].selectionType = 'level0'; recalculateCellCounts();">Level 0 Descendants</a>
															</li>
															<li>
																<a (click)="col[dimindex].selectionType = 'descendants'; recalculateCellCounts();">Descendants</a>
															</li>
															<li>
																<a (click)="col[dimindex].selectionType = 'idescendants'; recalculateCellCounts();">IDescendants</a>
															</li>
															<li>
																<a (click)="col[dimindex].selectionType = 'children'; recalculateCellCounts();">Children</a>
															</li>
															<li>
																<a (click)="col[dimindex].selectionType = 'ichildren'; recalculateCellCounts();">IChildren</a>
															</li>
														</ul>
													</div>
													<button class="btn btn-default" type="button" (click)="openMemberSelector('col', dimindex, i)">
														<i class="fa fa-codepen fa-fw" aria-hidden="true"></i>
														<ng-container *ngIf="col[dimindex].selectedMember">{{col[dimindex].selectedMember}}
															<span class="caret"></span>
														</ng-container>
														<ng-container *ngIf="!col[dimindex].selectedMember">No member is selected
															<span class="caret"></span>
														</ng-container>
													</button>
												</div>
											</div>
										</ng-container>
									</td>
								</tr>
							</ng-container>
						</tbody>
					</table>
				</div>
			</td>
		</tr>
		<tr>
			<td width="50%">
				<div class="table-responsive">
					<table class="table table-condensed">
						<thead>
							<tr>
								<th width="110">Rows</th>
								<td>
									<div class="btn-group btn-group-xs">
										<button class="btn btn-default" type="button" title="Add row" (click)="addRow()">
											<i class="fa fa-plus fa-fw"></i>
										</button>
									</div>
								</td>
							</tr>
						</thead>
						<tbody>
							<ng-container *ngFor="let row of rows; let i = index;">
								<tr>
									<td>
										Row {{i + 1}}
										<button class="btn btn-xs pull-right" (click)="deleteRow(i)" *ngIf="rows.length > 1">
											<i class="fa fa-trash fa-fw"></i>
										</button>
									</td>
									<td>
										<ng-container *ngFor="let dimension of rowDims; let dimindex = index;">
											<div class="btn-toolbar" role="toolbar" style="padding-bottom: 2px;">
												<div class="btn-group btn-group-xs">
													<button class="btn btn-default" type="button" title="Move to POVs" (click)="addToPOVs(dimindex, row[dimindex].selectedMember, row[dimindex].selectionType, 'rows')">
														<i class="fa fa-fw fa-filter"></i>
													</button>
													<button class="btn btn-default" type="button" title="Move to columns" (click)="addToCols(dimindex, row[dimindex].selectedMember, row[dimindex].selectionType, 'rows')">
														<i class="fa fa-fw fa-columns"></i>
													</button>
												</div>
												<div class="btn-group btn-group-xs">
													<button class="btn btn-default" type="button" style="width:100px; max-width: 100px; text-align: left;">{{dimension.name}} </button>
												</div>
												<div class="btn-group btn-group-xs" *ngIf="dimension.status != 'Ready'">
													<button class="btn btn-default btn-xs" disabled>
														<i class="fa fa-circle-o-notch fa-spin fa-fw"></i>
														Please wait, refreshing member list
													</button>
												</div>
												<div class="btn-group btn-group-xs" *ngIf="dimension.status == 'Ready'">
													<div class="btn-group btn-group-xs" role="group">
														<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width: 180px; max-width: 180px; text-align: left;">
															<i class="fa fa-facebook fa-fw" aria-hidden="true"></i>
															{{displaySelectionType(row[dimindex].selectionType)}}
															<span class="pull-right">
																<span class="caret"></span>
															</span>
														</button>
														<ul class="dropdown-menu">
															<li>
																<a (click)="row[dimindex].selectionType = 'member'; recalculateCellCounts();">Member</a>
															</li>
															<li>
																<a (click)="row[dimindex].selectionType = 'level0'; recalculateCellCounts();">Level 0 Descendants</a>
															</li>
															<li>
																<a (click)="row[dimindex].selectionType = 'descendants'; recalculateCellCounts();">Descendants</a>
															</li>
															<li>
																<a (click)="row[dimindex].selectionType = 'idescendants'; recalculateCellCounts();">IDescendants</a>
															</li>
															<li>
																<a (click)="row[dimindex].selectionType = 'children'; recalculateCellCounts();">Children</a>
															</li>
															<li>
																<a (click)="row[dimindex].selectionType = 'ichildren'; recalculateCellCounts();">IChildren</a>
															</li>
														</ul>
													</div>
													<button class="btn btn-default" type="button" (click)="openMemberSelector('row', dimindex, i)">
														<i class="fa fa-codepen fa-fw" aria-hidden="true"></i>
														<ng-container *ngIf="row[dimindex].selectedMember">{{row[dimindex].selectedMember}}
															<span class="caret"></span>
														</ng-container>
														<ng-container *ngIf="!row[dimindex].selectedMember">No member is selected
															<span class="caret"></span>
														</ng-container>
													</button>
												</div>
											</div>
										</ng-container>
									</td>
								</tr>
							</ng-container>
						</tbody>
					</table>
				</div>
			</td>
			<td width="50%">&nbsp;</td>
		</tr>
	</table>
</div>
<div class="row">
	<div class="col-xs-12">
		<pre>{{cellCounts | json}}</pre>
	</div>
</div>
<div class="row">
	<div class="col-xs-2">
		<pre>FieldList
{{mainService.currentItem.fieldList | json}}</pre>
	</div>
	<div class="col-xs-2">
		<pre>POV Dimensions
{{povDims | json}}</pre>
	</div>
	<div class="col-xs-2">
		<pre>Column Dimensions
{{colDims | json}}</pre>
	</div>
	<div class="col-xs-2">
		<pre>Columns
{{cols | json}}</pre>
	</div>
	<div class="col-xs-2">
		<pre>Row Dimensions
{{rowDims | json}}</pre>
	</div>
	<div class="col-xs-2">
		<pre>Rows
{{rows | json}}</pre>
	</div>
</div>
